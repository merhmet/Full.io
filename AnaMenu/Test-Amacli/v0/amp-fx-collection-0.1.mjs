;
(self.AMP=self.AMP||[]).push({m:1,v:"2405022220000",n:"amp-fx-collection",ev:"0.1",l:!0,f:function(t,s){(()=>{var s;function n(t){const s=Object.getOwnPropertyDescriptor(t,"message");if(null!=s&&s.writable)return t;const{message:n,stack:i}=t,e=new Error(n);for(const s in t)e[s]=t[s];return e.stack=i,e}function i(t){let s=null,i="";for(const t of arguments)t instanceof Error&&!s?s=n(t):(i&&(i+=" "),i+=t);return s?i&&(s.message=i+": "+s.message):s=new Error(i),s}function e(t){var s,n;null===(s=(n=self).__AMP_REPORT_ERROR)||void 0===s||s.call(n,t)}var{isArray:r}=Array,{hasOwnProperty:o,toString:a}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var u=self.__AMP_LOG;function c(t,s){throw new Error("failed to call initLogConstructor")}function l(t){return c()}function h(t,s,n,i,e,r,o,a,u,c,l){return t}function f(t,s,n,i,e,r,o,a,c,h,f){return(u.user||(u.user=l()),void u.user.win?u.userForEmbed||(u.userForEmbed=l()):u.user).assert(t,s,n,i,e,r,o,a,c,h,f)}var d,v=["fade-in","fade-in-scroll","float-in-bottom","float-in-top","fly-in-bottom","fly-in-left","fly-in-right","fly-in-top","parallax"],p=v[0],m=v[1],b=v[2],g=v[3],_=v[4],A=v[5],P=v[6],y=v[7],w=v[8],E={[p]:{observes:0,opacity:!0},[m]:{observes:0,opacity:!0},[b]:{observes:1,translates:{y:!0}},[g]:{observes:1,translates:{y:!0}},[_]:{observes:0,translates:{y:!0}},[A]:{observes:0,translates:{x:!0}},[P]:{observes:0,translates:{x:!0}},[y]:{observes:0,translates:{y:!0}},[w]:{observes:0,translates:{y:!0}}};function x(t,s){if(t==s)return!1;const{observes:n,opacity:i,translates:e}=E[t],{observes:r,opacity:o,translates:a}=E[s];if(n!==r)return!1;if(i&&o)return!1;if(e&&a){if(e.x&&a.x)return!1;if(e.y&&a.y)return!1}return!0}function M(t){return f(v.indexOf(t)>-1,"Invalid amp-fx type `%s`",t)}var R=["Webkit","webkit","Moz","moz","ms","O","o"],I={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function V(t){const s=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return R.some((t=>s.startsWith(t+"-")))?`-${s}`:s}function T(t,s,n){if(s.startsWith("--"))return s;d||(d=Object.create(null));let i=d[s];if(!i||n){if(i=s,void 0===t[s]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(s),e=function(t,s){for(let n=0;n<R.length;n++){const i=R[n]+s;if(void 0!==t[i])return i}return""}(t,n);void 0!==t[e]&&(i=e)}n||(d[s]=i)}return i}function $(t,s){const{style:n}=t;for(const t in s)n.setProperty(V(T(n,t)),String(s[t]),"important")}function z(t,s,n,i,e){const r=T(t.style,s,e);if(!r)return;const o=i?n+i:n;t.style.setProperty(V(r),o)}function F(t,s){for(const n in s)z(t,n,s[n])}function O(t){return`${t}px`}function S(t,s){return t.getComputedStyle(s)||I}function C(t){return"display"in t&&function(t,...s){const n=i.apply(null,s);n.name=t||n.name,e(n)}("STYLE","`display` style detected. You must use toggle instead."),t}function j(t,s,n,i){const e=Y(t),r=N(e);!function(t,s,n,i,e,r){const o=L(t);let a=o[n];a||(a=o[n]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=i,a.context=s,a.sharedInstance=!1,a.resolve&&X(t,n))}(r,e,s,n),i&&X(r,s)}function k(t,s){return X(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),s)}function H(t,s){return X(N(Y(t)),s)}function Y(t){return t.nodeType?(n=t,s=(n.ownerDocument||n).defaultView,k(s,"ampdoc")).getAmpDoc(t):t;var s,n}function N(t){const s=Y(t);return s.isSingleDoc()?s.win:s}function X(t,s){h(function(t,s){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[s];return!(!n||!n.ctor)}(t,s));const n=L(t)[s];return n.obj||(h(n.ctor),h(n.context),n.obj=new n.ctor(n.context),h(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function L(t){let s=t.__AMP_SERVICES;return s||(s=t.__AMP_SERVICES={}),s}var W=t=>H(t,"mutator"),B=t=>H(t,"viewport");function Z(t,s){return!(!t||!s)&&t.left==s.left&&t.top==s.top&&t.width==s.width&&t.height==s.height}function q(t,s,n){h("X"==s||"Y"==s),h(1==Math.abs(n));const i=t.element,e="X"==s,r=n*t.flyInDistance+(e?"vw":"vh");t.initialTrigger||(W(i).mutateElement(i,(()=>{const s=S(t.win,i),n=e?"left":"top",o="auto"===s[n]?"0px":s[n],a={position:"static"===s.position?"relative":s.position,visibility:"visible"};a[n]=`calc(${o} - ${r})`,F(i,C(a))})),t.initialTrigger=!0),F(i,{"transition-duration":t.duration,"transition-timing-function":t.easing,"transform":`translate${s}(${r})`})}function D(t){const s=parseFloat(t.getAttribute("data-margin-start"));return s&&f(s>=0&&s<=100,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",t),s}function G(t){return t&&t.positionRect?t.positionRect.top:null}function J(t,s,n){const i=G(t);return h(1==Math.abs(n)),!!i&&i+n*s.viewportHeight*s.flyInDistance/100<=(1-s.marginStart)*s.viewportHeight}function K(t,s,n){const i=G(t),e=void 0!==n?n:s.viewportHeight;return!!i&&i<=(1-s.marginStart)*e}var Q={[w]:{userAsserts(t){const s=f(t.getAttribute("data-parallax-factor"),"data-parallax-factor=<number> attribute must be provided for: %s",t);f(parseFloat(s)>0,"data-parallax-factor must be a number and greater than 0 for: %s",t)},update(t){const s=this,n=G(t);if(h(s.adjustedViewportHeight),!n||n>s.adjustedViewportHeight)return;const i=-(parseFloat(s.factor)-1),e=(s.adjustedViewportHeight-n)*i;s.offset=e,F(s.element,{transform:`translateY(${s.offset.toFixed(0)}px)`})}},[_]:{userAsserts:D,update(t){const s=this;h(s.viewportHeight),J(t,s,-1)&&q(s,"Y",-1)}},[A]:{userAsserts:D,update(t){const s=this;h(s.viewportHeight),K(t,s)&&q(s,"X",1)}},[P]:{userAsserts:D,update(t){const s=this;h(s.viewportHeight),K(t,s)&&q(s,"X",-1)}},[y]:{userAsserts:D,update(t){const s=this;h(s.viewportHeight),J(t,s,1)&&q(s,"Y",1)}},[p]:{userAsserts:D,update(t){const s=this;h(s.viewportHeight),K(t,s)&&F(s.element,{"transition-duration":s.duration,"transition-timing-function":s.easing,"opacity":1})}},[m]:{userAsserts(t){const s=D(t),n=parseFloat(t.getAttribute("data-margin-end"));n&&(f(n>=0&&n<=100,"data-margin-end must be a percentage value and be between 0% and 100% for: %s",t),f(n>s,"data-margin-end must be greater than data-margin-start for: %s",t))},update(t){const s=this,{marginStart:n,viewportHeight:i}=s;if(h(s.adjustedViewportHeight),!K(t,s,s.adjustedViewportHeight))return;if(!s.hasRepeat&&s.offset>=1)return;const e=1*(i-G(t)-n*i)/((s.marginEnd-n)*i);s.offset=e,F(s.element,{opacity:s.offset})}}};function U(t){const s=parseFloat(t);return isNaN(s)?null:s/100}function tt(t){switch(t){case p:case P:case A:case y:case _:return{"start":.05};case m:return{"start":0,"end":.5};default:return{"start":0,"end":1}}}function st(t,s,n,i,e){return t[s]==n||(nt(i),!1)}function nt(t,s=0){const{classList:n,id:i,parentElement:e,tagName:r}=t;if(i)return`#${i}`;let o=r.toLowerCase();if(n.length>0){const t=n.length>1?"...":"";o+=`.${n[0]}${t}`}if(!e)return`${o} (detached)`;const{firstElementChild:a,lastElementChild:u}=e;return t==a&&t==u||(t==a?o+=":first-child":t==u&&(o+=":last-child")),s>0?o:`${nt(e,s+1)} > ${o}`}t.registerServiceForDoc("amp-fx-collection",class{constructor(t){this.Ni=t,this.v$=[],Promise.all([t.whenReady(),t.whenFirstVisible()]).then((()=>{const t=this.Ni.getRootNode();this.m$(),function(t,n,i,e){let r=t,o=i;const a=function(){if(void 0!==s)return s;s=!1;try{const t={get capture(){return s=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return s}();r.addEventListener("amp:dom-update",(t=>{try{return o(t)}catch(t){var s,n;throw null===(s=(n=self).__AMP_REPORT_ERROR)||void 0===s||s.call(n,t),t}}),!!a&&e)}(t,0,(()=>this.m$()),void 0)}))}m$(){this.Ni.getRootNode().querySelectorAll("[amp-fx]").forEach((t=>{this.v$.includes(t)||function(t,...s){try{t.apply(null,s)}catch(t){!function(t){const s=i.apply(null,arguments);setTimeout((()=>{throw e(s),s}))}(t)}}((()=>this.b$(t)))}))}b$(t){h(t.hasAttribute("amp-fx")),h(!this.v$.includes(t)),h(this.Ni.isVisible()),function(t){h(t.hasAttribute("amp-fx"));const s=t.getAttribute("amp-fx").trim().toLowerCase().split(/\s+/);return f(s.length,"No value provided for `amp-fx` attribute"),function(t){for(let s=0;s<t.length;s++){const n=t[s];for(let i=s+1;i<t.length;i++)x(n,t[i])||t.splice(i--,1)}return t}(s.filter(M))}(t).forEach((s=>{this.g$(t,s)})),this.v$.push(t)}g$(t,s){const{observes:n}=h(E[s]);1!=n?function(t,s,n){(function(t){j(t,"position-observer",class{constructor(t){this.Ni=t,this.i=t.win,this.R_=[],this.ar=k(this.i,"vsync"),this.Uu=B(t),this.E_=[],this.M_=!1,this.V_=!1,this.x_=!1,this.S_=function(t,s,n){let i=0,e=0,r=null;function o(){i=0;const n=500-(t.Date.now()-e);var a;n>0?i=t.setTimeout(o,n):(a=r,r=null,s.apply(null,a))}return function(...s){e=t.Date.now(),r=s,i||(i=t.setTimeout(o,500))}}(this.i,(()=>{this.M_=!1}))}observe(t,s,n){const i=new class{constructor(t,s,n,i){this.element=s,this.Ie=i,this.fidelity=n,this.turn=0==n?Math.floor(4*Math.random()):0,this.F_=null,this.Uu=B(t)}Ee(t){const s=this.F_;if(s&&Z(s.positionRect,t.positionRect)&&Z(s.viewportRect,t.viewportRect))return;h(t.positionRect);const n=t.positionRect;var i,e;t.relativePos=(i=n,e=t.viewportRect,i.top<e.top?"top":i.bottom>e.bottom?"bottom":"inside"),function(t,s){return t.top<=s.bottom&&s.top<=t.bottom&&t.left<=s.right&&s.left<=t.right}(n,t.viewportRect)?(this.F_=t,this.Ie(t)):this.F_&&(this.F_=null,t.positionRect=null,this.Ie(t))}update(t){if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}const s=this.Uu.getSize(),n={left:0,top:0,width:i=s.width,height:e=s.height,bottom:0+e,right:0+i,x:0,y:0};var i,e;this.Uu.getClientRectAsync(this.element).then((t=>{this.Ee({positionRect:t,viewportRect:n,relativePos:null})}))}}(this.Ni,t,s,n);return this.R_.push(i),this.x_||this.C_(),i.update(),()=>{for(let t=0;t<this.R_.length;t++)if(this.R_[t]==i)return void this.k_(t)}}unobserve(t){for(let s=0;s<this.R_.length;s++)if(this.R_[s].element==t)return void this.k_(s);(u.dev||(u.dev=c())).error("POSITION_OBSERVER","cannot unobserve unobserved element")}k_(t){this.R_.splice(t,1),0==this.R_.length&&this.z_()}C_(){this.x_=!0,this.E_.push(this.Uu.onScroll((()=>{this.q_()}))),this.E_.push(this.Uu.onResize((()=>{this.H_()})))}z_(){for(this.x_=!1;this.E_.length;)this.E_.pop()()}updateAllEntries(t){for(let s=0;s<this.R_.length;s++)this.R_[s].update(t)}q_(){this.S_(),this.M_=!0,this.V_||this.B_()}H_(){this.updateAllEntries(!0)}B_(){this.updateAllEntries(),this.V_=!0,this.M_?this.ar.measure((()=>{this.B_()})):this.V_=!1}})})(t),new class{constructor(t,s,n){this.win=t.win,this.Mt=(t=>H(t,"position-observer"))(s),this.Uu=B(s),this.oc=W(s),this.viewportHeight=null,this.adjustedViewportHeight=null,this.element=s,this.offset=0,this._$=n,Q[n].userAsserts(s),this.factor=parseFloat(s.getAttribute("data-parallax-factor")),this.marginStart=s.hasAttribute("data-margin-start")?U(s.getAttribute("data-margin-start")):tt(n).start,this.marginEnd=s.hasAttribute("data-margin-end")?U(s.getAttribute("data-margin-end")):tt(n).end,this.easing=function(t){const s={"linear":"cubic-bezier(0.00, 0.00, 1.00, 1.00)","ease-in-out":"cubic-bezier(0.80, 0.00, 0.20, 1.00)","ease-in":"cubic-bezier(0.80, 0.00, 0.60, 1.00)","ease-out":"cubic-bezier(0.40, 0.00, 0.40, 1.00)"};return s[t]?s[t]:(f(t.startsWith("cubic-bezier"),"All custom bezier curves should be specified by following the `cubic-bezier()` function notation."),t)}(s.hasAttribute("data-easing")?s.getAttribute("data-easing"):function(t){switch(t){case p:return"ease-in";case P:case A:case y:case _:return"ease-out";default:return"ease-in"}}(n)),this.duration=s.hasAttribute("data-duration")?s.getAttribute("data-duration"):function(t,s){switch(s){case p:return"1000ms";case _:case y:case A:case P:const{width:s}=B(t).getSize();return(n=Math.min(1e3,s))<480?n=480:n>1e3&&(n=1e3),200*(n-480)/520+400+"ms";default:return"1ms"}var n}(t,n),this.flyInDistance=s.hasAttribute("data-fly-in-distance")?parseFloat(s.getAttribute("data-fly-in-distance")):function(t,s){switch(s){case _:case y:const{width:s}=B(t).getSize();return s<1e3?25:33;case A:case P:return 100;default:return 1}}(t,n),this.hasRepeat=s.hasAttribute("data-repeat"),this.initialTrigger=!1,this.A$().then((t=>{this.adjustedViewportHeight=t,this.P$()})),this.y$()}P$(){this.Mt.observe(this.element,1,Q[this._$].update.bind(this)),this.Uu.onResize((()=>{this.y$(),this.A$().then((t=>{this.adjustedViewportHeight=t}))}))}y$(){this.oc.measureElement((()=>{this.viewportHeight=this.Uu.getHeight()}))}A$(){return this.oc.measureElement((()=>{const t=this.Uu.getHeight();let s=0;for(let t=this.element;t;t=t.offsetParent)s+=t.offsetTop;return s<t?s:t}))}}(t,s,n),F(s,C(function(t,s){switch(s){case w:return{"will-change":"transform"};case p:case m:return{"will-change":"opacity","opacity":0};case _:case y:case A:case P:return{"will-change":"transform"};default:return{"visibility":"visible"}}}(0,n)))}(this.Ni,t,s):function(t,s,n){if((i=s,H(i,"viewer")).isEmbedded())return;var i;const e="fx-scroll-dispatch";j(t,e,class{constructor(t){this.Ni=t,this._u=new class{constructor(){this.Vt=null}add(t){return this.Vt||(this.Vt=[]),this.Vt.push(t),()=>{this.remove(t)}}remove(t){this.Vt&&function(t,s){const n=t.indexOf(s);-1!=n&&t.splice(n,1)}(this.Vt,t)}removeAll(){this.Vt&&(this.Vt.length=0)}fire(t){if(this.Vt)for(const s of this.Vt.slice())s(t)}getHandlerCount(){var t,s;return null!==(t=null===(s=this.Vt)||void 0===s?void 0:s.length)&&void 0!==t?t:0}},this.w$=function(t){let s=!1,n=null,i=t;return(...t)=>(s||(n=i.apply(self,t),s=!0,i=null),n)}((()=>this.Au())),this.E$=0,this.x$=0,this.M$=!0}observe(t){this._u.add(t),this.w$()}Au(){const t=B(this.Ni);t.onScroll((()=>{this.R$(t.getScrollTop())}))}R$(t){this.x$=t;const s=this.x$-this.E$;return(!this.M$&&s>0||this.M$&&s<0)&&(this.E$=this.x$),!this.M$&&this.x$<=36||!this.M$&&s<-20?(this.I$(!0),void(this.E$=this.x$)):void(this.M$&&s>80&&(this.I$(!1),this.E$=this.x$))}I$(t){this.M$!=t&&(this.M$=t,this._u.fire(t))}});const r=H(t,e),o=W(s);let a=!0;o.measureMutateElement(s,(()=>{const i=S(t.win,s),e=function(t,s,n){const i=s.replace(/^float\-in\-([^\s]+)$/,"$1");return h(i.length>0),st(n,i,O(0),t)?i:null}(s,n,i),o=function(t,s){return st(s,"overflow","hidden",t)&&st(s,"position","fixed",t)}(s,i);e&&o?r.observe((t=>{!function(t,s,n){let i=0;W(t).measureMutateElement(t,(()=>{i=function(t,s,n){if(s)return 0;const i=t.getBoundingClientRect().height;return"top"==n?-i:i}(t,s,n)}),(()=>{!function(t,s){$(t,{"transition":"transform 300ms ease","transform":`translate(0, ${O(s)})`})}(t,i)}))}(s,t,h(e))})):a=!1}),(()=>{a&&function(t){$(t,{"will-change":"transform"})}(s)}))}(this.Ni,t,s)}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-fx-collection-0.1.mjs.map